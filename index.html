<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Patholytica — by MedicineBank</title>

<!-- Inter Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ------------------------------------
   YOUR FULL CSS UNCHANGED
------------------------------------ */
[THE CSS YOU PROVIDED STAYS EXACTLY THE SAME — to save space here]
</style>
</head>
<body>

<div class="background-pattern"></div>

<!-- Notification Area -->
<div id="notificationArea"></div>

<div class="header-wrapper">
  <div class="header">
    <a href="https://patholytica.com" class="logo-container">
      <div class="logo-img"></div>
      <span class="logo-text">Patholytica</span>
    </a>
    <button class="theme-toggle" id="themeToggleBtn">
      <i class="fas fa-moon"></i>
      <span>Theme</span>
    </button>
  </div>
</div>

<div class="login-container">
  <div class="login-card">
    <h1>Welcome to Patholytica</h1>
    <p>Your tool to <span class="highlight">LOVE</span> what you learn in pathology</p>

<!-- Initial buttons -->
<div id="initialButtons" class="form-container">
  <button id="googleLoginBtn" class="login-btn google-btn">
    <i class="fab fa-google btn-icon"></i>
    <span>Continue with Google</span>
    <div class="spinner" id="googleSpinner"></div>
  </button>

  <div class="divider">OR</div>

  <button class="login-btn" id="startLoginBtn">
    <i class="fas fa-envelope btn-icon"></i>
    <span>Login with Email</span>
  </button>

  <div class="guest-text" id="guestBtn">
    <i class="fas fa-user-secret"></i>
    <span>Continue as Guest</span>
  </div>
</div>

<!-- LOGIN FORM -->
<form id="loginForm" class="form-container" style="display:none;">
  <div class="input-group">
    <label class="input-label">Email Address</label>
    <input type="email" class="input-field" id="loginEmail" placeholder="you@example.com" autocomplete="email">
    <div class="input-error" id="loginEmailError">
      <i class="fas fa-exclamation-circle"></i>
      <span>Please enter a valid email address</span>
    </div>
  </div>

  <div class="input-group">
    <label class="input-label">Password</label>
    <input type="password" class="input-field" id="loginPassword" placeholder="Enter your password" autocomplete="current-password">
    <div class="input-error" id="loginPasswordError">
      <i class="fas fa-exclamation-circle"></i>
      <span>Password is required</span>
    </div>
    <div class="input-hint">
      <a href="#" id="forgotPassword">Forgot password?</a>
    </div>
  </div>

  <button type="submit" class="login-btn" id="loginSubmitBtn">
    <span>Continue</span>
    <div class="spinner" id="loginSpinner"></div>
  </button>

  <div class="form-links">
    <a href="#" id="backToInitial"><i class="fas fa-arrow-left"></i> Back</a>
    <a href="#" id="showSignupLink">Don't have an account? <i class="fas fa-arrow-right"></i></a>
  </div>
</form>

<!-- SIGNUP FORM -->
<form id="signupForm" class="form-container" style="display:none;">
  <div class="input-group">
    <label class="input-label">Full Name</label>
    <input type="text" class="input-field" id="signupName" placeholder="John Doe">
    <div class="input-error" id="signupNameError">
      <i class="fas fa-exclamation-circle"></i>
      <span>Please enter your full name</span>
    </div>
  </div>

  <div class="input-group">
    <label class="input-label">Email Address</label>
    <input type="email" class="input-field" id="signupEmail" placeholder="you@example.com">
    <div class="input-error" id="signupEmailError">
      <i class="fas fa-exclamation-circle"></i>
      <span>Please enter a valid email address</span>
    </div>
  </div>

  <div class="input-group">
    <label class="input-label">Username</label>
    <input type="text" class="input-field" id="signupUsername" placeholder="johndoe_med">
    <div class="input-error" id="signupUsernameError">
      <i class="fas fa-exclamation-circle"></i>
      <span>Username must be 3–20 characters</span>
    </div>
  </div>

  <div class="input-group">
    <label class="input-label">Password</label>
    <input type="password" class="input-field" id="signupPassword" placeholder="Create a strong password">
    <div class="password-strength">
      <div class="password-strength-bar" id="passwordStrengthBar"></div>
    </div>
  </div>

  <div class="input-group">
    <label class="input-label">Confirm Password</label>
    <input type="password" class="input-field" id="signupConfirmPassword" placeholder="Re-enter your password">
    <div class="input-error" id="signupConfirmPasswordError">
      <i class="fas fa-exclamation-circle"></i>
      <span>Passwords do not match</span>
    </div>
  </div>

  <div class="checkbox-container">
    <input type="checkbox" id="termsCheckbox">
    <label for="termsCheckbox">I agree to the <a href="#">Terms</a> and <a href="#">Privacy Policy</a></label>
  </div>

  <button type="submit" class="login-btn" id="signupSubmitBtn">
    <span>Create Account</span>
    <div class="spinner" id="signupSpinner"></div>
  </button>

  <div class="form-links">
    <a href="#" id="showLoginLink"><i class="fas fa-arrow-left"></i> Back to Login</a>
  </div>
</form>

  </div>
</div>

<footer>
  <div>© 2025 Patholytica by MedicineBank. All rights reserved.</div>
  <div class="footer-links">
    <a href="#"><i class="fas fa-shield-alt"></i>Privacy Policy</a>
    <a href="#"><i class="fas fa-file-contract"></i>Terms of Service</a>
    <a href="#"><i class="fas fa-envelope"></i>Contact Us</a>
    <a href="#"><i class="fas fa-question-circle"></i>Help Center</a>
  </div>
</footer>

<!-- ------------------------------------------
   JAVASCRIPT — FULL & COMPLETE
------------------------------------------ -->
<script type="module">
import { 
  initializeApp 
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";

import { 
  getAuth,
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  GoogleAuthProvider,
  signInWithPopup,
  sendPasswordResetEmail 
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

/* ----------------- Firebase Init ----------------- */
const firebaseConfig = {
  apiKey: "AIzaSyBs6V0yY14cuLBXB1nciZ-X0eyAiodC-Ak",
  authDomain: "patholytica.firebaseapp.com",
  projectId: "patholytica",
  storageBucket: "patholytica.firebasestorage.app",
  messagingSenderId: "738430635282",
  appId: "1:738430635282:web:8451ef380447c7611137cb"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

/* ----------------- UI References ----------------- */
const initialButtons = document.getElementById("initialButtons");
const loginForm = document.getElementById("loginForm");
const signupForm = document.getElementById("signupForm");

const loginSubmitBtn = document.getElementById("loginSubmitBtn");
const signupSubmitBtn = document.getElementById("signupSubmitBtn");

/* ----------------- Notifications ----------------- */
function notify(type, message) {
  const box = document.createElement("div");
  box.className = `notification ${type} show`;
  box.innerHTML = `
    <i class="notification-icon fas fa-${type === "error" ? "times" : type === "success" ? "check" : "info"}"></i>
    <div class="notification-message">${message}</div>
  `;
  document.getElementById("notificationArea").appendChild(box);

  setTimeout(() => { box.classList.remove("show"); }, 3000);
  setTimeout(() => { box.remove(); }, 3800);
}

/* ----------------- Theme ----------------- */
document.getElementById("themeToggleBtn").addEventListener("click", () => {
  document.body.classList.toggle("light-theme");
});

/* ----------------- Navigation ----------------- */
document.getElementById("startLoginBtn").onclick = () => {
  initialButtons.style.display = "none";
  loginForm.style.display = "block";
};

document.getElementById("showSignupLink").onclick = () => {
  loginForm.style.display = "none";
  signupForm.style.display = "block";
};

document.getElementById("showLoginLink").onclick = () => {
  signupForm.style.display = "none";
  loginForm.style.display = "block";
};

document.getElementById("backToInitial").onclick = () => {
  loginForm.style.display = "none";
  initialButtons.style.display = "block";
};

/* ----------------- Google Login ----------------- */
document.getElementById("googleLoginBtn").onclick = async () => {
  try {
    const provider = new GoogleAuthProvider();
    await signInWithPopup(auth, provider);
    notify("success", "Logged in successfully!");
    window.location.href = "/dashboard";
  } catch (err) {
    notify("error", err.message);
  }
};

/* ----------------- Email Login ----------------- */
loginForm.addEventListener("submit", async (e) => {
  e.preventDefault();

  const email = loginEmail.value.trim();
  const password = loginPassword.value.trim();

  try {
    await signInWithEmailAndPassword(auth, email, password);
    notify("success", "Login Successful!");
    window.location.href = "/dashboard";
  } catch (err) {
    notify("error", err.message);
  }
});

/* ----------------- Signup ----------------- */
signupForm.addEventListener("submit", async (e) => {
  e.preventDefault();

  if (!termsCheckbox.checked) {
    notify("error", "Please accept the terms first.");
    return;
  }

  const email = signupEmail.value.trim();
  const password = signupPassword.value.trim();
  const confirm = signupConfirmPassword.value.trim();

  if (password !== confirm) {
    notify("error", "Passwords do not match.");
    return;
  }

  try {
    await createUserWithEmailAndPassword(auth, email, password);
    notify("success", "Account created!");
    window.location.href = "/dashboard";
  } catch (err) {
    notify("error", err.message);
  }
});

/* ----------------- Reset Password ----------------- */
document.getElementById("forgotPassword").onclick = async () => {
  const email = loginEmail.value.trim();
  if (!email) {
    notify("warning", "Enter your email first.");
    return;
  }

  try {
    await sendPasswordResetEmail(auth, email);
    notify("success", "Password reset link sent!");
  } catch (err) {
    notify("error", err.message);
  }
};

/* ----------------- Guest Mode ----------------- */
document.getElementById("guestBtn").onclick = () => {
  notify("info", "Continuing as guest...");
  setTimeout(() => {
    window.location.href = "/guest";
  }, 800);
};
</script>

</body>
</html>